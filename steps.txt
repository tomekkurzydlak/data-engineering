async fn get_steps_for_file(&self, file_id: &str) -> Result<Vec<ProcessStep>> {
        let q = r#"
            select get_payload_for_dispatcher_file($1)
        "#;

        let row = self.client.query_one(q, &[&file_id]).await?;
        let json: serde_json::Value = row.get(0);

        // Zakładamy, że procedura zwraca JSON w formacie:
        // { "processes": [ {exec_process_seq, process_cd, exec_env, exec_object_nm}, ... ] }
        let processes = json
            .get("processes")
            .cloned()
            .unwrap_or(serde_json::Value::Array(vec![]));

        let steps: Vec<ProcessStep> = serde_json::from_value(processes)
            .context("Błąd parsowania steps z JSON")?;

        Ok(steps)
    }
